!!!
%html{"xmlns:fb" => "http://www.facebook.com/2008/fbml", "xmlns:og" => "http://opengraphprotocol.org/schema/"}
  %head
    %meta{:charset => 'utf-8'}
    %title ActWitty - Check-in your interests
    = display_meta_tags :site => 'ActWitty'
    = include_stylesheets :defaults

    -if @page_mode == "landing_page" or @page_mode == "authentications_page"
      = include_stylesheets :landing_pages

    -if @page_mode == "profile_chn_page" or @page_mode == "profile_stm_page" or @page_mode == "profile_usr_settings_page" or @page_mode == "profile_channel_settings_page"
      = include_stylesheets :profile_page_commons
      = include_stylesheets :profile_page_externals
    
    -if @page_mode == "profile_chn_page"
      = include_stylesheets :profile_page_channels
    
    -if @page_mode == "profile_stm_page"
      = include_stylesheets :profile_page_streams

    -if @page_mode == "profile_usr_settings_page"
      = include_stylesheets :profile_page_settings
    
    -if @page_mode == "profile_channel_settings_page"
      = include_stylesheets :profile_channel_settings    

    
    -if @page_mode == "profile_single_activity_page"
      = include_stylesheets :profile_page_commons
      = include_stylesheets :profile_page_externals
      = include_stylesheets :profile_page_streams
      = include_stylesheets :profile_single_post_page

    -if @page_mode == "single_channel_page"
      = include_stylesheets :profile_page_commons
      = include_stylesheets :profile_page_externals
      = include_stylesheets :profile_page_streams
      = include_stylesheets :channel_page

    -if @page_mode == "single_mention_page"
      = include_stylesheets :profile_page_commons
      = include_stylesheets :profile_page_externals
      = include_stylesheets :profile_page_streams
      = include_stylesheets :mention_page

    -if @page_mode == "single_location_page"
      = include_stylesheets :profile_page_commons
      = include_stylesheets :profile_page_externals
      = include_stylesheets :profile_page_streams
      = include_stylesheets :location_page

    %meta{'http-equiv' => 'X-UA-Compatible', :content => 'IE=edge,chrome=1'}
    %meta{"http-equiv"=>"Content-Type", :content=>"text/html; charset=utf-8"}/
    %script{:src => "http://maps.google.com/maps/api/js?sensor=false", :type => "text/javascript"}
    = include_javascripts :jquery
    = javascript_tag "var AUTH_TOKEN = #{form_authenticity_token.inspect};" if protect_against_forgery?
   

    
    = include_javascripts :actwittyall
    = include_javascripts :profile_commons
    = include_javascripts :profile_main_extra

   
    -if @page_mode == "profile_usr_settings_page"
      = include_javascripts :profile_settings 

    -if @page_mode == "profile_channel_settings_page"
      = include_javascripts :profile_channel_settings 

    -if @page_mode == "profile_chn_page"
      = include_javascripts :profile_channels

    -if @page_mode == "profile_stm_page"
      = include_javascripts :profile_streams

    -if @page_mode == "profile_single_activity_page"
      = include_javascripts :profile_streams
      = include_javascripts :profile_single_post_page
    
    -if @page_mode == "single_channel_page"
      = include_javascripts :profile_streams
      = include_javascripts :channel_page
    
    -if @page_mode == "single_mention_page"
      = include_javascripts :profile_streams
      = include_javascripts :mention_page

    -if @page_mode == "single_location_page"
      = include_javascripts :profile_streams
      = include_javascripts :location_page

    -if @page_mode != "authentications_page"
      = include_javascripts :autocomplete
    :javascript
      if ($.browser.msie && $.browser.version.substr(0,1)<9){
        alert("oops!! You seems to be using older version of browser, ActWitty is not supported yet on your browser version. We suggest you to upgrade to higher version.");
      }
    = csrf_meta_tag
     
    %link{:href => "/images/actwitty/refactor/aw_common/aw_favicon.ico", :rel => "icon", :type => "image/ico"}/
    
    
  /%body
  %body
    =render :partial => "home/modal"

    = yield
   
    :javascript
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-24404937-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
